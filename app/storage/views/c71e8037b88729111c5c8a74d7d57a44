
<?php $__env->startSection('jumbotron'); ?>

<div class="col-sm-8">
	<h1>Get the price before you order</h1>
	<p>
		Find drink prices from your favorite bars and restaurants
	</p>
	<div class="btn btn-lg btn-info" id="searchButton" role="button" style="margin: 0 10px 10px 0">
		Search
	</div>
	<a class="btn btn-lg btn-default" href="/restaurants" role="button" style="margin: 0 10px 10px 0;">Browse All Restaurants</a>
	<div id="searchForm" style="display:none;margin: 10px 0 0 0;">
		<?php echo Form::open(array('action' => 'RestaurantController@search')); ?>
		<fieldset>
			<div class="form-group">
				<div class="input-group">
					<input type="text" class="form-control" id="search" name="search" placeholder="Enter restaurant or bar here" required="">
					<span class="input-group-btn">
						<button class="btn btn-default" type="submit">
							Search
						</button> </span>
				</div>
			</div>
		</fieldset>
		<?php echo Form::close(); ?>
	</div>
</div>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('main-content'); ?>

<div class="col-sm-6" id="submit-description">
	<h1>Submit your price</h1>
	<p>
		Submit drinks that you have bought so others can benefit from it
	</p>
</div>
<div class="col-sm-6">
	<?php echo Form::open(array(
	'action'       => 'DatabaseController@saveSubmission',
	'id' => 'submitDrink'
	)); ?>
	<div class="form-group">
		<label class="control-label" for="restaurantName">Restaurant Name</label>
		<input class="form-control" id="restaurantName" name="restaurant" type="text" placeholder="Restaurant Name" required="">
	</div>
	<div class="form-group">
		<label class="control-label" for="zipCode">Zip Code</label>
		<input class="form-control" id="zipCode" name="zip" type="text" placeholder="Zip Code" required="">
	</div>
	<div class="form-group">
		<label class="control-label" for="drinkName">Drink Name</label>
		<input class="form-control" id="drinkName" name="drink" type="text" placeholder="Drink Name" required="">
	</div>
	<div class="form-group">
		<label class="control-label" for="drinkPrice">Drink Price</label>
		<div class="input-group">
			<span class="input-group-addon">$</span>
			<input type="text" class="form-control" name="price" id="drinkPrice" required="">
		</div>
	</div>
	<div class="form-group">
		<label class="control-label">Drink Type</label>
		<div class="radio">
			<label>
				<input type="radio" name="drink_type" value="beer" checked="checked">
				Beer</label>
		</div>
		<div class="radio">
			<label>
				<input type="radio" name="drink_type" value="wine">
				Wine</label>
		</div>
		<div class="radio">
			<label>
				<input type="radio" name="drink_type" value="cocktail">
				Cocktail</label>
		</div>
		<div class="radio">
			<label>
				<input type="radio" name="drink_type" value="other">
				Other</label>
		</div>
	</div>
	<div class="form-group">

		<button type="reset" class="btn btn-default">
			Clear
		</button>
		<button type="submit" class="btn btn-primary">
			Submit
		</button>

	</div>
	<?php echo Form::close(); ?>
</div>
<?php $__env->stopSection(); ?>

<?php $__env->startSection('scripts'); ?>
<script>

	$('#submitDrink :input').focus(function() {
		if ($('#zipCode').val() == '') {
			getLocation();
		}
	});
	
	function getLocation() {
		if (navigator.geolocation) {
			navigator.geolocation.getCurrentPosition(showPosition);
		} else {
			x.innerHTML = "Geolocation is not supported by this browser.";
		}
	}

	function showPosition(position) {

		$.getJSON('https://maps.googleapis.com/maps/api/geocode/json?latlng=' + position.coords.latitude + ', ' + position.coords.longitude + '&sensor=true&result_type=postal_code&key=AIzaSyAGA5gNtINOy6Zx_JEkjBls3OPsj8P0gc8', function(result) {
			var zip = result.results[0]['address_components'][0]['short_name'];
			var patt = /\b\d{5}\b/;
			if (patt.test(zip)) {
				$('#zipCode').val(zip);
			}
		});

	}
</script>
<?php $__env->stopSection(); ?>

<?php echo $__env->make('master', array_except(get_defined_vars(), array('__data', '__path')))->render(); ?>